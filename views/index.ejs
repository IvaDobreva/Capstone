<!DOCTYPE html>
<html lang="en">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <head>
    <title>Bird Korea</title>
    <link rel='stylesheet' href='/stylesheets/main.css'>
    <link rel='stylesheet' href='/stylesheets/fontfaces.css'>
    <script src="scripts/modernizr.js"></script>
    <script src="scripts/loader.js"></script>
  </head>

  <body>
    <!--include ejs file like this.-->
    <header>
      <% include templates/header.ejs %>
    </header>

    <div class="body">
         <img id="img" val="<%=kor%>" src= "<%=image%>" width="400" height="300">
        <h3>What does this image mean?</h3>
        <h3 id="counter">Quiz : 0/200</h3>
        <div class='answer'>
          <input id="word_field" />
          <button id="go_btn" onclick ="">GO</button>
          <button id="next_btn" onclick ="">NEXT</button>
      </div>
    </div>

  </body>

  <script>
  var count = 0;
  $(document).ready(function(){
    $("#next_btn").click(function(data){
      $.get("/game/getImage")
        .done(function( data) {
          $("#img").attr("src",data['image']);
          $("#img").attr("val", data['kor']);
          $("#counter").replaceWith("<h3 id=\"counter\">Quiz : " + count + "/200</h3>");
          count = count + 1;
        });
    });
  });

  $(document).ready(function(){
    count = count + 1 ;
    $("#go_btn").click(function(data){
      $.post('/game/word',  {word:$("#word_field").val(), image: $('#img').attr("val")},
        function(data) {
          console.log("answer: " + data['answer']);
        });
      //TO DO: Clear input
      $.get("/game/getImage")
        .done(function( data) {
          console.log(data['image']);
          $("#img").attr("src",data['image']);
          $("#img").attr("val", data['kor']);
          $("#counter").replaceWith("<h3 id=\"counter\">Quiz : " + count + "/200</h3>");
          count = count + 1;
        });
    });
  });
  </script>

</html>
